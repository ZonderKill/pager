<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>rc-pager Mocha Runner</title>
</head>
<body>
<div id="mocha"></div>
<script charset="utf-8" src="/seajs/2.3.0/dist/sea.js?nowrap"></script>
<script src="/node_modules/node-jscover/lib/front-end/header.js?nowrap"></script>
<script src="/node_modules/node-jscover/lib/front-end/jscoverage-branch.js?nowrap"></script>
<link href="/node_modules/mocha/mocha.css?nowrap" type="text/css" rel="stylesheet" charset="utf-8">
<script src="/node_modules/mocha/mocha.js?nowrap"></script>
<script src='/node_modules/node-jscover/lib/reporters/mocha/console.js?nowrap'></script>
<script src='/node_modules/node-jscover-coveralls/lib/reports/mocha.js?nowrap'></script>
<script>
    mocha.setup('bdd');

    seajs.config({
        base: '/'
    });
    
    var isCoverage = location.search.indexOf('coverage') !== -1;

    seajs.config({
      map: [function(url) {
        if (!isCoverage) {
          return url;
        }
        var sources = [''
          ,'index'
          ,'lib/Pager'
        ];
        var matcher = url.match('http:\/\/(.*?)\/(.*)');
        var file;
        if (matcher) {
          file = matcher[2].replace(/\.js$/, '');
        } else {
          return url;
        }
        sources = sources.slice(1);
        for (var i=0; i<sources.length; i++) {
          if (file === sources[i]) {
              return url.replace(/\.js$/g, '-coverage.js');
          }
        }
        return url;
      }]
    });
    seajs.use('tests/index-spec', function() {
        if (window.mochaPhantomJS) {
            mochaPhantomJS.run();
            if (isCoverage) {
                window.nodeJsCoverCoveralls(runner);
            }
        } else {
            mocha.run();
        }
    });
</script>
</body>
</html>
